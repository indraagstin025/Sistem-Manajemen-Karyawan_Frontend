import"./input-15de07a3.js";import{C as m,i as g,a as u,l as h,W as y}from"./WorkScheduleServices-6b431584.js";import{S as s}from"./logoutHandler-a2e70173.js";import"./sidebarHandler-d6522c99.js";import"./AuthServices-0f733033.js";document.addEventListener("DOMContentLoaded",()=>{let o;const c=async()=>{var n,r;try{const i=(await y.getMyWorkSchedules()).data;o&&o.removeAllEvents();const a={};i.forEach(t=>{a[t.date]||(a[t.date]=[]),a[t.date].push(t)});const d=Object.entries(a).map(([t,l])=>({id:t,title:"",start:`${t}T${l[0].start_time}`,end:`${t}T${l[0].end_time}`,extendedProps:{items:l},backgroundColor:"#e53e3e",borderColor:"#e53e3e",allDay:!1}));o.addEventSource(d)}catch(e){console.error("Error fetching my work schedules:",e),s.fire("Gagal memuat jadwal kerja",((r=(n=e.response)==null?void 0:n.data)==null?void 0:r.error)||e.message,"error")}},p=document.getElementById("my-calendar");o=new m(p,{plugins:[g,u],initialView:"dayGridMonth",locale:h,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},editable:!1,selectable:!1,eventContent:()=>({html:'<div style="width: 10px; height: 10px; border-radius: 50%; background-color: red; margin: auto;"></div>'}),datesSet:()=>{c()},eventClick:n=>{const{start:r,extendedProps:e}=n.event,i=r.toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"});let a="";e.items&&e.items.length>0?a=e.items.map((d,t)=>`
            <div style="margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #eee;">
                <p style="margin: 0; font-weight: bold;">Jadwal ${t+1}:</p>
                <p style="margin: 5px 0;"><strong>Jam:</strong> ${d.start_time} - ${d.end_time}</p>
                <p style="margin: 5px 0;"><strong>Catatan:</strong> ${d.note||"Tanpa catatan"}</p>
            </div>
            `).join(""):a="<p>Tidak ada jadwal untuk hari ini.</p>",s.fire({title:"Detail Jadwal Kerja",html:`
          <div style="text-align: left; max-height: 300px; overflow-y: auto; padding-right: 10px;">
            <p style="margin-bottom: 15px;"><b>Tanggal:</b> ${i}</p>
            ${a}
          </div>
        `,icon:"info",confirmButtonText:"Tutup",customClass:{popup:"rounded-lg",confirmButton:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded"},buttonsStyling:!1})},eventDidMount:function(n){var e;const r=((e=n.event.extendedProps.items)==null?void 0:e.length)||1;n.el.title=`${r} jadwal pada hari ini`}}),o.render()});
