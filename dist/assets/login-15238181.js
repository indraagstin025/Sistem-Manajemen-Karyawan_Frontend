import"./input-253ff0e0.js";/* empty css               */import{a as u}from"./AuthServices-f47c4eb9.js";import{T as n}from"./toastify-3acd0462.js";/* empty css                 */document.addEventListener("DOMContentLoaded",()=>{const d=document.getElementById("loginForm");d&&d.addEventListener("submit",async i=>{i.preventDefault(),console.log("Tombol login ditekan, memulai proses...");const o=document.getElementById("email"),t=document.getElementById("password"),e=document.getElementById("errorMessage"),r=d.querySelector('button[type="submit"]'),l=o.value,c=t.value;e&&e.classList.add("hidden"),o.classList.remove("border-red-500"),t.classList.remove("border-red-500");const m=r.textContent;r.disabled=!0,r.textContent="Memproses...";try{const s=await u.login(l,c);console.log("Login berhasil, menerima data dari server:",s),s&&s.user&&s.user.role?(console.log("Membaca peran pengguna:",s.user.role),s.user.role==="admin"?(console.log('Kondisi IF terpenuhi. Peran adalah "admin", mengarahkan ke dasbor admin...'),window.location.href="/admin_dashboard.html"):(console.log('Kondisi ELSE terpenuhi. Peran BUKAN "admin", mengarahkan ke dasbor karyawan...'),window.location.href="/employee_dashboard.html")):(console.error("Struktur data dari server tidak sesuai. 'data.user.role' tidak ditemukan.",s),n({text:"Respons dari server tidak lengkap.",duration:3e3,style:{background:"red"}}).showToast())}catch(s){console.error("Login gagal di dalam blok CATCH:",s);const a=s.message||"Terjadi kesalahan.";a.toLowerCase().includes("email")&&a.toLowerCase().includes("password")?(e&&(e.textContent="Email dan password tidak valid",e.classList.remove("hidden")),o.classList.add("border-red-500"),t.classList.add("border-red-500")):a.toLowerCase().includes("email")||a.toLowerCase().includes("user not found")||a.toLowerCase().includes("tidak terdaftar")||a.toLowerCase().includes("not found")||a.toLowerCase().includes("invalid email")?(e&&(e.textContent="Email tidak terdaftar",e.classList.remove("hidden")),o.classList.add("border-red-500")):a.toLowerCase().includes("password")||a.toLowerCase().includes("salah")||a.toLowerCase().includes("incorrect")||a.toLowerCase().includes("wrong")||a.toLowerCase().includes("invalid password")?(e&&(e.textContent="Password salah",e.classList.remove("hidden")),t.classList.add("border-red-500")):(e&&(e.textContent="Email dan password tidak valid",e.classList.remove("hidden")),o.classList.add("border-red-500"),t.classList.add("border-red-500")),n({text:a,duration:3e3,style:{background:"red"}}).showToast()}finally{r.disabled=!1,r.textContent=m}})});
